<ul class="nav nav-tabs">
  <li class="<%= 'active' if params[:period].blank? || params[:period] == 'today' %>">
    <%= link_to 'Today', url_for(params.merge(:period => 'today')) %>
  </li>
  <li class="<%= 'active' if params[:period] == 'yesterday' %>">
    <%= link_to 'Yesterday', url_for(params.merge(:period => 'yesterday')) %>
  </li>
  <li class="<%= 'active' if params[:period] == 'week' %>">
    <%= link_to '7 days', url_for(params.merge(:period => 'week')) %>
  </li>
  <li class="<%= 'active' if params[:period] == 'month' %>">
    <%= link_to '30 days', url_for(params.merge(:period => 'month')) %>
  </li>
  <li class="<%= 'active' if params[:period] == 'all' %>">
    <%= link_to 'All', url_for(params.merge(:period => 'all')) %>
  </li>
</ul>

<table id="history" class="table table-condensed">
	<tr>
		<th>Completed</th>
		<th>Failed</th>
		<th>Time encoded</th>
		<th>Average processing time</th>
		<th>Average queue time</th>
	</tr>
	<tr>
		<td class="success" title="<%= @history.completed_jobs.size %> out of <%= @history.jobs.size %> completed">
			<span class="badge badge-success"><%= @history.completed_jobs.size %></span>
		</td>
		<td class="failed" title="<%= @history.failed_jobs.size %> out of <%= @history.jobs.size %> failed">
			<span class="badge badge-error"><%= @history.failed_jobs.size %></span>
		</td>
		<td title="<%= number_with_delimiter @history.seconds_encoded %> seconds">
			<%= number_to_time @history.seconds_encoded %>
		</td>
		<td title="<%= number_with_precision @history.average_processing_time %> seconds">
			<%= number_to_time @history.average_processing_time %>
		</td>
		<td title="<%= number_with_precision @history.average_queue_time %> seconds">
			<%= number_to_time @history.average_queue_time %>
		</td>
	</tr>
</table>

